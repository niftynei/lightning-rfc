# Variations on dual-funding open_channel2.

1. connect: privkey=0000000000000000000000000000000000000000000000000000000000000002
2. expect-send: type=init localfeatures=20000000/30000000 option_dual_fund/odd
2. expect-send: type=init localfeatures=10000000/30000000 option_dual_fund/even
    # Compulsory is OK
    1. recv: type=init globalfeatures= localfeatures=100000aa
    # Optional is OK
    1. recv: type=init globalfeatures= localfeatures=200000aa

3. maybe-send: type=gossip_timestamp_filter
   chain_hash=06226e46111a0b59caaf126043eb5bbf28c34f3a5e332a1fc7b2b73cf188910f

4. recv: type=open_channel2
   chain_hash=06226e46111a0b59caaf126043eb5bbf28c34f3a5e332a1fc7b2b73cf188910f
   temporary_channel_id=0000000000000000000000000000000000000000000000000000000000000000
   funding_satoshis=999877
   push_msat=0
   dust_limit_satoshis=546
   max_htlc_value_in_flight_msat=4294967295
   htlc_minimum_msat=0
   feerate_per_kw=253
   feerate_per_kw_funding=253
   # Maybe omit this field?
   contrib_count=1
   to_self_delay=6
   max_accepted_htlcs=483
   # funding_privkey=0000000000000000000000000000000000000000000000000000000000000020
   funding_pubkey=03d30199d74fb5a22d47b6e054e2f378cedacffcb89904a61d75d0dbd407143e65
   # revocation_basepoint_secret=0000000000000000000000000000000000000000000000000000000000000021
   revocation_basepoint=021697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5
   # payment_basepoint_secret=0000000000000000000000000000000000000000000000000000000000000022
   payment_basepoint=031be68a5a028f2601d0e80d468c344ba331d611b96c358b6032e8b4da0547fc11
   # delayed_payment_basepoint_secret=0000000000000000000000000000000000000000000000000000000000000023
   delayed_payment_basepoint=03605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479
   # htlc_basepoint_secret=0000000000000000000000000000000000000000000000000000000000000024
   htlc_basepoint=02e0392cfa338aaf2f0b56c563e3e5e67a5d5fefe3388f85d90c899da20f0198f9
   # shachain seed=0000000000000000000000000000000000000000000000000000000000000000
   # first per_commitment_secret=02a40c85b6f28da08dfdbe0926c53fab2de6d28c10301f8f7c4073d5e42e3148
   first_per_commitment_point=02037803a3228ec3a517835480ffac64c0557d9d75e0fe85861ab0be9eb224e6f8
   channel_flags=01
   opening_tlv=

5. expect-send: type=accept_channel2
   temporary_channel_id=0000000000000000000000000000000000000000000000000000000000000000
   funding_satoshis=0
   dust_limit_satoshis=546
   max_htlc_value_in_flight_msat=18446744073709551615
   htlc_minimum_msat=0
   minimum_depth=3
   to_self_delay=6
   max_accepted_htlcs=483
   # funding_privkey=0000000000000000000000000000000000000000000000000000000000000010
   funding_pubkey=03e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a
   # revocation_basepoint_secret=0000000000000000000000000000000000000000000000000000000000000011
   revocation_basepoint=03defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34
   # payment_basepoint_secret=0000000000000000000000000000000000000000000000000000000000000012
   payment_basepoint=025601570cb47f238d2b0286db4a990fa0f3ba28d1a319f5e7cf55c2a2444da7cc
   # delayed_payment_basepoint_secret=0000000000000000000000000000000000000000000000000000000000000013
   delayed_payment_basepoint=022b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c
   # htlc_basepoint_secret=0000000000000000000000000000000000000000000000000000000000000014
   htlc_basepoint=024ce119c96e2fa357200b559b2f7dd5a5f02d5290aff74b03f3e471b273211c97
   # shachain seed=ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
   # first per_commitment_secret=7cc854b54e3e0dcdb010d7a3fee464a9687be6e8db3be6854c475621e007a5dc
   first_per_commitment_point=0288a618cb6027c3218a37cbe9e882379f17d87d03f6e99d0b60292478d2aded06
   opening_tlv=

6. recv: type=funding_compose
   temporary_channel_id=0000000000000000000000000000000000000000000000000000000000000000
   channel_reserve_satoshis=9998
   # prevtx_txid=16835ac8c154b616baac524163f41fb0c4f82c7b972ad35d4d6f18d854f6856b
   input_info=[{input_satoshis=1000000,prevtx_txid=6b85f654d8186f4d5dd32a977b2cf8c4b01ff4634152acba16b654c1c85a8316,prevtx_vout=1,prevtx_scriptpubkey=001483440596268132e6c99d44dae2d151dabd9a2b23,max_witness_len=109,script=}]
   output_info=

7. expect-send: type=funding_compose
   temporary_channel_id=0000000000000000000000000000000000000000000000000000000000000000
   channel_reserve_satoshis=9998
   input_info=
   output_info=

8. recv: type=commitment_signed
   channel_id=1d3160756ceeaf5474f389673aafe0484e58260927871ce92f388f72b0409c18
   signature=bb1c8cf61909040714430c9762b90789c271111466382a9da76c81ae1b70d42b42be45887d9b4bc89d866d8154650ad82569ffb70b64ce61843a31aa47fadd1d
   htlc_signature=

9. expect-send: type=commitment_signed
   channel_id=1d3160756ceeaf5474f389673aafe0484e58260927871ce92f388f72b0409c18
   signature=6ff386eda4d53a864a4def24ea934973a5fe91bb2e80548133ed4a9c71e49a2f647d30ad08539c5f8329046052801c340be586050f5f4d117d4dc94d5620ca68
   htlc_signature=
   
# funding sig: 798d96d5a057b5b7797988a855217f41af05ece3ba8278366e2f69763c72e78565d5dd7eeddc0766ddf65557c92b9c52c301f23f94d2cf681860d32153e6ae1e
10. recv: type=funding_signed2
   channel_id=1d3160756ceeaf5474f389673aafe0484e58260927871ce92f388f72b0409c18
   witness_stack=[{witness_element=[{witness=30440220798d96d5a057b5b7797988a855217f41af05ece3ba8278366e2f69763c72e785022065d5dd7eeddc0766ddf65557c92b9c52c301f23f94d2cf681860d32153e6ae1e01},{witness=02d6a3c2d0cf7904ab6af54d7c959435a452b24a63194e1c4e7c337d3ebbb3017b}]}]

11. expect-send: type=funding_signed2
   channel_id=1d3160756ceeaf5474f389673aafe0484e58260927871ce92f388f72b0409c18
   witness_stack=

# In theory, the accepter should broadcast this transaction for us.
12. block: height=103 n=3 tx=020000000001016b85f654d8186f4d5dd32a977b2cf8c4b01ff4634152acba16b654c1c85a83160100000000ffffffff01c5410f0000000000220020c46bf3d1686d6dbb2d9244f8f67b90370c5aa2747045f1aeccb77d8187117382024730440220798d96d5a057b5b7797988a855217f41af05ece3ba8278366e2f69763c72e785022065d5dd7eeddc0766ddf65557c92b9c52c301f23f94d2cf681860d32153e6ae1e012102d6a3c2d0cf7904ab6af54d7c959435a452b24a63194e1c4e7c337d3ebbb3017b00000000

13. expect-send: type=funding_locked
   channel_id=1d3160756ceeaf5474f389673aafe0484e58260927871ce92f388f72b0409c18
   next_per_commitment_point=032405cbd0f41225d5f203fe4adac8401321a9e05767c5f8af97d51d2e81fbb206

14. recv: type=funding_locked
   channel_id=1d3160756ceeaf5474f389673aafe0484e58260927871ce92f388f72b0409c18
   next_per_commitment_point=027eed8389cf8eb715d73111b73d94d2c2d04bf96dc43dfd5b0970d80b3617009d
